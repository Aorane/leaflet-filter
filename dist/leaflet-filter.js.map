{"version":3,"file":"leaflet-filter.js","sources":["../src/js/filter/Leaflet.filter.js","../src/js/filter/handler/Filter.Polygon.js","../src/js/filter/handler/Filter.Circle.js","../src/js/filter/handler/Filter.Rectangle.js","../src/js/filter/handler/Filter.Clear.js","../src/js/filter/Control.Filter.js","../src/js/filter/FilterToolbar.js"],"sourcesContent":["L.filterLocal = {\n\tfilter: {\n\t\ttoolbar: {\n\t\t\tactions: {\n\t\t\t\ttitle: 'Cancel drawing',\n\t\t\t\ttext: 'Cancel'\n\t\t\t},\n\t\t\tbuttons: {\n\t\t\t\trectangle: 'Draw a bounding box filter',\n\t\t\t\tpolygon: 'Draw a bounding polygon filter',\n\t\t\t\tcircle: 'Draw a bounding circle filter',\n\t\t\t\tdisabled: 'Filter already applied',\n\t\t\t\tclear: 'Clear current filter',\n\t\t\t\tclearDisabled: 'No active filter'\n\t\t\t}\n\t\t},\n\t\thandlers: {\n\t\t\tsimpleshape: {\n\t\t\t\ttooltip: {\n\t\t\t\t\tend: 'Release mouse to finish drawing.'\n\t\t\t\t}\n\t\t\t},\n\t\t\trectangle: {\n\t\t\t\ttooltip: {\n\t\t\t\t\tstart: 'Click and drag to draw rectangle.'\n\t\t\t\t}\n\t\t\t},\n\t\t\tpolyline: {\n\t\t\t\ttooltip: {\n\t\t\t\t\tstart: 'Not used',\n\t\t\t\t}\n\t\t\t},\n\t\t\tpolygon: {\n\t\t\t\ttooltip: {\n\t\t\t\t\tstart: 'Click to draw polygon points.'\n\t\t\t\t}\n\t\t\t},\n\t\t\tcircle: {\n\t\t\t\ttooltip: {\n\t\t\t\t\tstart: 'Click and drag to draw circle.'\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n","L.Filter = (null != L.Filter) ? L.Filter : {};\n\nL.Filter.Polygon = L.Draw.Polygon.extend({\n\n\tstatics: {\n\t\tTYPE: 'polygon'\n\t},\n\n\tincludes: [ L.Mixin.Events ]\n\n});\n","L.Filter = (null != L.Filter) ? L.Filter : {};\n\nL.Filter.Circle = L.Draw.Circle.extend({\n\n\tstatics: {\n\t\tTYPE: 'circle'\n\t},\n\n\tincludes: [ L.Mixin.Events ]\n\n});\n","L.Filter = (null != L.Filter) ? L.Filter : {};\n\nL.Filter.Rectangle = L.Draw.Rectangle.extend({\n\n\tstatics: {\n\t\tTYPE: 'rectangle'\n\t},\n\n\tincludes: [ L.Mixin.Events ]\n\n});\n","L.Filter = (null != L.Filter) ? L.Filter : {};\n\nL.Filter.Clear = L.EditToolbar.Delete.extend({\n\n\tstatics: {\n\t\tTYPE: 'clear'\n\t},\n\n\tincludes: [ L.Mixin.Events ],\n\n\t// @method intialize(): void\n\tinitialize: function (map, options) {\n\t\tL.EditToolbar.Delete.prototype.initialize.call(this, map, options);\n\n\t\t// Save the type so super can fire, need to do this as cannot do this.TYPE :(\n\t\tthis.type = L.Filter.Clear.TYPE;\n\t}\n\n\n});\n","/**\n * Filter Control\n * This control utilizes the Leaflet Draw plugin, allowing users to draw one shape and firing events\n * when the filter state changes from filtered to not filtered based on the presence or absence of\n * a shape.\n *\n * L is defined by the Leaflet library, see git://github.com/Leaflet/Leaflet.git for documentation\n */\nL.Control.Filter = L.Control.extend({\n\n\toptions: {\n\t\tposition: 'topleft',\n\t\tfilter: {\n\t\t\trectangle: {},\n\t\t\tpolygon: {},\n\t\t\tcircle: {},\n\t\t\tfeatureGroup: null\n\t\t}\n\t},\n\n\tinitialize: function (options) {\n\t\tL.Control.prototype.initialize.call(this, options);\n\n\t\t// Initialize toolbars\n\t\tif (L.FilterToolbar && this.options.filter) {\n\t\t\tthis._toolbar = new L.FilterToolbar(this.options.filter);\n\t\t}\n\t},\n\n\tonAdd: function (map) {\n\t\tvar container = L.DomUtil.create('div', 'leaflet-draw'),\n\t\t\ttopClassName = 'leaflet-draw-toolbar-top',\n\t\t\ttoolbarContainer;\n\n\t\ttoolbarContainer = this._toolbar.addToolbar(map);\n\n\t\tif (toolbarContainer) {\n\t\t\t// Add class to the first toolbar to remove the margin\n\t\t\tif (!L.DomUtil.hasClass(toolbarContainer, topClassName)) {\n\t\t\t\tL.DomUtil.addClass(toolbarContainer.childNodes[0], topClassName);\n\t\t\t}\n\t\t\tcontainer.appendChild(toolbarContainer);\n\t\t}\n\n\t\t// register for create events\n\t\tmap.on('filter:created', this._filterCreatedHandler, this);\n\t\tmap.on('filter:cleared', this._filterClearedHandler, this);\n\n\t\treturn container;\n\t},\n\n\tonRemove: function (map) {\n\t\t// unregister create events\n\t\tmap.off('filter:created', this._filterCreatedHandler, this);\n\t\tmap.off('filter:cleared', this._filterClearedHandler, this);\n\n\t\tif (null != this._featureGroup) {\n\t\t\t// Unregister for the edit events\n\t\t\tthis._featureGroup.shape.off('edit', this._filterUpdatedHandler, this);\n\t\t}\n\n\t\tthis._toolbar.removeToolbar();\n\t},\n\n\tequals: function(shape1, shape2) {\n\t\treturn this._toolbar.equals(shape1, shape2);\n\t},\n\n\t// Public method to programatically set the state of the filter\n\tsetFilter: function(filter) {\n\t\t// Check to see if a change is being applied\n\t\tvar shape1 = (null != this._featureGroup)? this._getGeo(this._featureGroup.type, this._featureGroup.shape) : undefined;\n\n\t\t// If there is no change, then we're just going to short circuit out of here\n\t\tif(this._toolbar.equals(shape1, filter)) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar filterObject;\n\t\tif (null != filter) {\n\t\t\t// Ask the handler for the filter object\n\t\t\tfilterObject = this._toolbar.setFilter(filter);\n\t\t}\n\t\tif (null != filterObject) {\n\t\t\t// Clear the old filter\n\t\t\tthis._clearFilter(true);\n\n\t\t\t// Create the new filter\n\t\t\tthis._createFilter(filterObject);\n\t\t}\n\t\telse {\n\t\t\tthis._clearFilter();\n\t\t}\n\t},\n\n\t_createFilter: function(filter, suppressEvent) {\n\t\t//Add the created shape to the filter group\n\t\tthis.options.featureGroup.addLayer(filter.layer);\n\n\t\t// Store the internal representation of the filter state\n\t\tthis._featureGroup = { shape: filter.layer, type: filter.type };\n\n\t\t// Register for the edit events on the filter shape\n\t\tthis._featureGroup.shape.on('edit', this._filterUpdatedHandler, this);\n\n\t\t// Fire the event that we've updated the filter\n\t\tif (!suppressEvent) { this._map.fire('filter:filter', { geo : this._getGeo(filter.type, filter.layer) }); }\n\n\t\t// Set the filtered state on the toolbar\n\t\tthis._toolbar.setFiltered(true);\n\t},\n\n\t_clearFilter: function(suppressEvent) {\n\t\t// Remove the filter shape\n\t\tthis.options.featureGroup.clearLayers();\n\t\tthis._featureGroup = undefined;\n\n\t\t// Fire the event\n\t\tif (!suppressEvent) { this._map.fire('filter:filter', { geo: undefined }); }\n\n\t\t// Update the toolbar state\n\t\tthis._toolbar.setFiltered(false);\n\t},\n\n\t_filterCreatedHandler: function(e) {\n\t\tthis._createFilter({ type: e.layerType, layer: e.layer});\n\t},\n\n\t_filterUpdatedHandler: function() {\n\t\t// Only process updates when we have a stored filter shape\n\t\tif (null != this._featureGroup) {\n\t\t\tvar payload = {\n\t\t\t\tgeo: this._getGeo(this._featureGroup.type, this._featureGroup.shape)\n\t\t\t};\n\t\t\t// Only need to fire event - no need to update the toolbar\n\t\t\tthis._map.fire('filter:filter', payload);\n\t\t}\n\t},\n\n\t_filterClearedHandler: function() {\n\t\tthis._clearFilter();\n\t},\n\n\t_getGeo: function(layerType, layer) {\n\t\treturn this._toolbar.getGeo(layerType, layer);\n\t},\n\n\tsetFilteringOptions: function (options) {\n\t\tthis._toolbar.setOptions(options);\n\t}\n});\n\nL.Map.mergeOptions({\n\tdrawControlTooltips: true,\n\tfilterControl: false\n});\n\nL.Map.addInitHook(function () {\n\tif (this.options.filterControl) {\n\t\tthis.filterControl = new L.Control.Filter();\n\t\tthis.addControl(this.filterControl);\n\t}\n});\n\nL.control.filter = function(options) {\n\treturn new L.Control.Filter(options);\n};\n","L.FilterToolbar = L.DrawToolbar.extend({\n\n\tstatics: {\n\t\tTYPE: 'filter'\n\t},\n\n\toptions: {\n\t\tpolygon: {},\n\t\trectangle: {},\n\t\tcircle: {}\n\t},\n\n\tinitialize: function (options) {\n\t\tL.DrawToolbar.prototype.initialize.call(this, options);\n\t\tthis._toolbarClass = 'leaflet-draw-draw';\n\t},\n\n\tgetModeHandlers: function (map) {\n\t\treturn [\n\t\t\t{\n\t\t\t\tenabled: this.options.polygon,\n\t\t\t\thandler: new L.Filter.Polygon(map, this.options.polygon),\n\t\t\t\ttitle: L.drawLocal.draw.toolbar.buttons.polygon\n\t\t\t},\n\t\t\t{\n\t\t\t\tenabled: this.options.rectangle,\n\t\t\t\thandler: new L.Filter.Rectangle(map, this.options.rectangle),\n\t\t\t\ttitle: L.drawLocal.draw.toolbar.buttons.rectangle\n\t\t\t},\n\t\t\t{\n\t\t\t\tenabled: this.options.circle,\n\t\t\t\thandler: new L.Filter.Circle(map, this.options.circle),\n\t\t\t\ttitle: L.drawLocal.draw.toolbar.buttons.circle\n\t\t\t},\n\t\t\t{\n\t\t\t\tenabled: true,\n\t\t\t\thandler: new L.Filter.Clear(map, { featureGroup: this.options.featureGroup }),\n\t\t\t\ttitle: L.drawLocal.draw.toolbar.buttons.circle\n\t\t\t}\n\t\t];\n\t},\n\n\t// Get the actions part of the toolbar\n\tgetActions: function (handler) {\n\t\treturn L.DrawToolbar.prototype.getActions(handler);\n\t},\n\n\tsetOptions: function (options) {\n\t\tL.DrawToolbar.prototype.setOptions(options);\n\t},\n\n\taddTo: function (map) {\n\t\tvar container = map.addToolbar(this);\n\t\tthis.setFiltered(false);\n\t\treturn container;\n\t},\n\n\tsetFiltered: function(filtered) {\n\t\tvar type;\n\n\t\tif (filtered) {\n\t\t\tfor (type in this._modes) {\n\t\t\t\t// The two draw buttons are disabled when we are filtered\n\t\t\t\tL.DomUtil.addClass(this._modes[type].button, 'leaflet-disabled');\n\t\t\t\tthis._modes[type].button.setAttribute('title', L.filterLocal.filter.toolbar.buttons.disabled);\n\t\t\t\tthis._modes[type].handler.lock();\n\t\t\t}\n\n\t\t\t// Clear button is enabled\n\t\t\tL.DomUtil.removeClass(this._modes.clear.button, 'leaflet-disabled');\n\t\t\tthis._modes.clear.button.setAttribute('title', L.filterLocal.filter.toolbar.buttons.clear);\n\t\t\tthis._modes.clear.handler.unlock();\n\n\t\t}\n        else {\n\t\t\tfor (type in this._modes) {\n\t\t\t\t// The two draw buttons are enabled when there are no filters\n\t\t\t\tL.DomUtil.removeClass(this._modes[type].button, 'leaflet-disabled');\n\t\t\t\tthis._modes[type].button.setAttribute('title', L.filterLocal.filter.toolbar.buttons[type]);\n\t\t\t\tthis._modes[type].handler.unlock();\n\t\t\t}\n\n\t\t\t// Clear button is disabled\n\t\t\tL.DomUtil.addClass(this._modes.clear.button, 'leaflet-disabled');\n\t\t\tthis._modes.clear.button.setAttribute('title', L.filterLocal.filter.toolbar.buttons.clearDisabled);\n\t\t\tthis._modes.clear.handler.lock();\n\t\t}\n\t},\n\n\tsetFilter: function(filter) {\n\t\tif (null != this._modes[filter.type]) {\n\t\t\treturn this._modes[filter.type].handler.setFilter(filter);\n\t\t}\n\t\telse {\n\t\t\tconsole.error('Unsupported filter type: ' + filter.type);\n\t\t}\n\t},\n\n\tgetGeo: function(layerType, layer) {\n\t\treturn this._modes[layerType].handler.getGeo(layer);\n\t},\n\n\tequals: function(shape1, shape2) {\n\t\tif (shape1 == null || shape1.type == null) {\n\t\t\tshape1 = null;\n\t\t}\n\t\tif (shape2 == null || shape2.type == null) {\n\t\t\tshape2 = null;\n\t\t}\n\n\t\tif (shape1 == null && shape2 == null) {\n\t\t\treturn true;\n\t\t}\n\t\telse if (shape1 == null || shape2 == null) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this._modes[shape1.type].handler.equals(shape1, shape2);\n\t}\n\n});\n"],"names":[],"mappings":";;;;;;;AAAA,CAAC,CAAC,WAAW,GAAG;CACf,MAAM,EAAE;EACP,OAAO,EAAE;GACR,OAAO,EAAE;IACR,KAAK,EAAE,gBAAgB;IACvB,IAAI,EAAE,QAAQ;IACd;GACD,OAAO,EAAE;IACR,SAAS,EAAE,4BAA4B;IACvC,OAAO,EAAE,gCAAgC;IACzC,MAAM,EAAE,+BAA+B;IACvC,QAAQ,EAAE,wBAAwB;IAClC,KAAK,EAAE,sBAAsB;IAC7B,aAAa,EAAE,kBAAkB;IACjC;GACD;EACD,QAAQ,EAAE;GACT,WAAW,EAAE;IACZ,OAAO,EAAE;KACR,GAAG,EAAE,kCAAkC;KACvC;IACD;GACD,SAAS,EAAE;IACV,OAAO,EAAE;KACR,KAAK,EAAE,mCAAmC;KAC1C;IACD;GACD,QAAQ,EAAE;IACT,OAAO,EAAE;KACR,KAAK,EAAE,UAAU;KACjB;IACD;GACD,OAAO,EAAE;IACR,OAAO,EAAE;KACR,KAAK,EAAE,+BAA+B;KACtC;IACD;GACD,MAAM,EAAE;IACP,OAAO,EAAE;KACR,KAAK,EAAE,gCAAgC;KACvC;IACD;GACD;EACD;CACD,CAAC;;AC5CF,CAAC,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,EAAE,CAAC;;AAE9C,CAAC,CAAC,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;;CAExC,OAAO,EAAE;EACR,IAAI,EAAE,SAAS;EACf;;CAED,QAAQ,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE;;CAE5B,CAAC,CAAC;;ACVH,CAAC,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,EAAE,CAAC;;AAE9C,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;;CAEtC,OAAO,EAAE;EACR,IAAI,EAAE,QAAQ;EACd;;CAED,QAAQ,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE;;CAE5B,CAAC,CAAC;;ACVH,CAAC,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,EAAE,CAAC;;AAE9C,CAAC,CAAC,MAAM,CAAC,SAAS,GAAG,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;;CAE5C,OAAO,EAAE;EACR,IAAI,EAAE,WAAW;EACjB;;CAED,QAAQ,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE;;CAE5B,CAAC,CAAC;;ACVH,CAAC,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,EAAE,CAAC;;AAE9C,CAAC,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC;;CAE5C,OAAO,EAAE;EACR,IAAI,EAAE,OAAO;EACb;;CAED,QAAQ,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE;;;CAG5B,UAAU,EAAE,UAAU,GAAG,EAAE,OAAO,EAAE;EACnC,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE,OAAO,CAAC,CAAC;;;EAGnE,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC;EAChC;;;CAGD,CAAC,CAAC;;ACnBH;;;;;;;;AAQA,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC;;CAEnC,OAAO,EAAE;EACR,QAAQ,EAAE,SAAS;EACnB,MAAM,EAAE;GACP,SAAS,EAAE,EAAE;GACb,OAAO,EAAE,EAAE;GACX,MAAM,EAAE,EAAE;GACV,YAAY,EAAE,IAAI;GAClB;EACD;;CAED,UAAU,EAAE,UAAU,OAAO,EAAE;EAC9B,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;;;EAGnD,IAAI,CAAC,CAAC,aAAa,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;GAC3C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;GACzD;EACD;;CAED,KAAK,EAAE,UAAU,GAAG,EAAE;EACrB,IAAI,SAAS,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,cAAc,CAAC;GACtD,YAAY,GAAG,0BAA0B;GACzC,gBAAgB,CAAC;;EAElB,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;;EAEjD,IAAI,gBAAgB,EAAE;;GAErB,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,gBAAgB,EAAE,YAAY,CAAC,EAAE;IACxD,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC;IACjE;GACD,SAAS,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;GACxC;;;EAGD,GAAG,CAAC,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;EAC3D,GAAG,CAAC,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;;EAE3D,OAAO,SAAS,CAAC;EACjB;;CAED,QAAQ,EAAE,UAAU,GAAG,EAAE;;EAExB,GAAG,CAAC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;EAC5D,GAAG,CAAC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;;EAE5D,IAAI,IAAI,IAAI,IAAI,CAAC,aAAa,EAAE;;GAE/B,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;GACvE;;EAED,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE,CAAC;EAC9B;;CAED,MAAM,EAAE,SAAS,MAAM,EAAE,MAAM,EAAE;EAChC,OAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;EAC5C;;;CAGD,SAAS,EAAE,SAAS,MAAM,EAAE;;EAE3B,IAAI,MAAM,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC;;;EAGvH,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE;GACxC,OAAO;GACP;;EAED,IAAI,YAAY,CAAC;EACjB,IAAI,IAAI,IAAI,MAAM,EAAE;;GAEnB,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;GAC/C;EACD,IAAI,IAAI,IAAI,YAAY,EAAE;;GAEzB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;;;GAGxB,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;GACjC;OACI;GACJ,IAAI,CAAC,YAAY,EAAE,CAAC;GACpB;EACD;;CAED,aAAa,EAAE,SAAS,MAAM,EAAE,aAAa,EAAE;;EAE9C,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;;;EAGjD,IAAI,CAAC,aAAa,GAAG,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC;;;EAGhE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;;;EAGtE,IAAI,CAAC,aAAa,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE;;;EAG3G,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;EAChC;;CAED,YAAY,EAAE,SAAS,aAAa,EAAE;;EAErC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;EACxC,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC;;;EAG/B,IAAI,CAAC,aAAa,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE,GAAG,EAAE,SAAS,EAAE,CAAC,CAAC,EAAE;;;EAG5E,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;EACjC;;CAED,qBAAqB,EAAE,SAAS,CAAC,EAAE;EAClC,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;EACzD;;CAED,qBAAqB,EAAE,WAAW;;EAEjC,IAAI,IAAI,IAAI,IAAI,CAAC,aAAa,EAAE;GAC/B,IAAI,OAAO,GAAG;IACb,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC;IACpE,CAAC;;GAEF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;GACzC;EACD;;CAED,qBAAqB,EAAE,WAAW;EACjC,IAAI,CAAC,YAAY,EAAE,CAAC;EACpB;;CAED,OAAO,EAAE,SAAS,SAAS,EAAE,KAAK,EAAE;EACnC,OAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;EAC9C;;CAED,mBAAmB,EAAE,UAAU,OAAO,EAAE;EACvC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;EAClC;CACD,CAAC,CAAC;;AAEH,CAAC,CAAC,GAAG,CAAC,YAAY,CAAC;CAClB,mBAAmB,EAAE,IAAI;CACzB,aAAa,EAAE,KAAK;CACpB,CAAC,CAAC;;AAEH,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC,YAAY;CAC7B,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE;EAC/B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;EAC5C,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;EACpC;CACD,CAAC,CAAC;;AAEH,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,SAAS,OAAO,EAAE;CACpC,OAAO,IAAI,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;CACrC,CAAC;;ACtKF,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC;;CAEtC,OAAO,EAAE;EACR,IAAI,EAAE,QAAQ;EACd;;CAED,OAAO,EAAE;EACR,OAAO,EAAE,EAAE;EACX,SAAS,EAAE,EAAE;EACb,MAAM,EAAE,EAAE;EACV;;CAED,UAAU,EAAE,UAAU,OAAO,EAAE;EAC9B,CAAC,CAAC,WAAW,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;EACvD,IAAI,CAAC,aAAa,GAAG,mBAAmB,CAAC;EACzC;;CAED,eAAe,EAAE,UAAU,GAAG,EAAE;EAC/B,OAAO;GACN;IACC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO;IAC7B,OAAO,EAAE,IAAI,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;IACxD,KAAK,EAAE,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO;IAC/C;GACD;IACC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;IAC/B,OAAO,EAAE,IAAI,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;IAC5D,KAAK,EAAE,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS;IACjD;GACD;IACC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM;IAC5B,OAAO,EAAE,IAAI,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;IACtD,KAAK,EAAE,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM;IAC9C;GACD;IACC,OAAO,EAAE,IAAI;IACb,OAAO,EAAE,IAAI,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,EAAE,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC;IAC7E,KAAK,EAAE,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM;IAC9C;GACD,CAAC;EACF;;;CAGD,UAAU,EAAE,UAAU,OAAO,EAAE;EAC9B,OAAO,CAAC,CAAC,WAAW,CAAC,SAAS,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;EACnD;;CAED,UAAU,EAAE,UAAU,OAAO,EAAE;EAC9B,CAAC,CAAC,WAAW,CAAC,SAAS,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;EAC5C;;CAED,KAAK,EAAE,UAAU,GAAG,EAAE;EACrB,IAAI,SAAS,GAAG,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;EACrC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;EACxB,OAAO,SAAS,CAAC;EACjB;;CAED,WAAW,EAAE,SAAS,QAAQ,EAAE;EAC/B,IAAI,IAAI,CAAC;;EAET,IAAI,QAAQ,EAAE;GACb,KAAK,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;;IAEzB,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC;IACjE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;IAC9F,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACjC;;;GAGD,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC;GACpE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;GAC3F,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;;GAEnC;aACU;GACV,KAAK,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;;IAEzB,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC;IACpE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;IAC3F,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;IACnC;;;GAGD,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC;GACjE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;GACnG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;GACjC;EACD;;CAED,SAAS,EAAE,SAAS,MAAM,EAAE;EAC3B,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;GACrC,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;GAC1D;OACI;GACJ,OAAO,CAAC,KAAK,CAAC,2BAA2B,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;GACzD;EACD;;CAED,MAAM,EAAE,SAAS,SAAS,EAAE,KAAK,EAAE;EAClC,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;EACpD;;CAED,MAAM,EAAE,SAAS,MAAM,EAAE,MAAM,EAAE;EAChC,IAAI,MAAM,IAAI,IAAI,IAAI,MAAM,CAAC,IAAI,IAAI,IAAI,EAAE;GAC1C,MAAM,GAAG,IAAI,CAAC;GACd;EACD,IAAI,MAAM,IAAI,IAAI,IAAI,MAAM,CAAC,IAAI,IAAI,IAAI,EAAE;GAC1C,MAAM,GAAG,IAAI,CAAC;GACd;;EAED,IAAI,MAAM,IAAI,IAAI,IAAI,MAAM,IAAI,IAAI,EAAE;GACrC,OAAO,IAAI,CAAC;GACZ;OACI,IAAI,MAAM,IAAI,IAAI,IAAI,MAAM,IAAI,IAAI,EAAE;GAC1C,OAAO,KAAK,CAAC;GACb;;EAED,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;EAC/D;;CAED,CAAC,CAAC,;;,;;"}